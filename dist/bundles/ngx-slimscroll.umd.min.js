!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs/Observable"),require("rxjs/Subscription"),require("rxjs/add/observable/fromEvent"),require("rxjs/add/observable/merge"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/operator/map")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/Observable","rxjs/Subscription","rxjs/add/observable/fromEvent","rxjs/add/observable/merge","rxjs/add/operator/mergeMap","rxjs/add/operator/takeUntil","rxjs/add/operator/map"],t):t(e["ngx-slimscroll"]={},e.ng.core,e.ng.common,e.Rx,e.Rx)}(this,function(e,t,r,i,n){"use strict";var s=function(){return function(e){this.type=e.type,this.y=e&&e.y?e.y:0,this.percent=e&&e.percent?e.percent:0,this.duration=e&&e.duration?e.duration:0,this.easing=e&&e.easing?e.easing:"linear"}}(),o=new t.InjectionToken("NGX_SLIMSCROLL_DEFAULTS"),l=function(){function e(e){this.position=e&&e.position?e.position:"right",this.barBackground=e&&e.barBackground?e.barBackground:"#343a40",this.barOpacity=e&&e.barOpacity?e.barOpacity:"1",this.barWidth=e&&e.barWidth?e.barWidth:"12",this.barBorderRadius=e&&e.barBorderRadius?e.barBorderRadius:"5",this.barMargin=e&&e.barMargin?e.barMargin:"1px 0",this.gridBackground=e&&e.gridBackground?e.gridBackground:"#adb5bd",this.gridOpacity=e&&e.gridOpacity?e.gridOpacity:"1",this.gridWidth=e&&e.gridWidth?e.gridWidth:"8",this.gridBorderRadius=e&&e.gridBorderRadius?e.gridBorderRadius:"10",this.gridMargin=e&&e.gridMargin?e.gridMargin:"1px 2px",this.alwaysVisible=!e||"undefined"==typeof e.alwaysVisible||e.alwaysVisible,this.visibleTimeout=e&&e.visibleTimeout?e.visibleTimeout:1e3,this.scrollSensitivity=e&&e.scrollSensitivity?e.scrollSensitivity:1}return e.prototype.merge=function(t){var r=new e;return r.position=t&&t.position?t.position:this.position,r.barBackground=t&&t.barBackground?t.barBackground:this.barBackground,r.barOpacity=t&&t.barOpacity?t.barOpacity:this.barOpacity,r.barWidth=t&&t.barWidth?t.barWidth:this.barWidth,r.barBorderRadius=t&&t.barBorderRadius?t.barBorderRadius:this.barBorderRadius,r.barMargin=t&&t.barMargin?t.barMargin:this.barMargin,r.gridBackground=t&&t.gridBackground?t.gridBackground:this.gridBackground,r.gridOpacity=t&&t.gridOpacity?t.gridOpacity:this.gridBackground,r.gridWidth=t&&t.gridWidth?t.gridWidth:this.gridWidth,r.gridBorderRadius=t&&t.gridBorderRadius?t.gridBorderRadius:this.gridBorderRadius,r.gridMargin=t&&t.gridMargin?t.gridMargin:this.gridMargin,r.alwaysVisible=t&&"undefined"!=typeof t.alwaysVisible?t.alwaysVisible:this.alwaysVisible,r.visibleTimeout=t&&t.visibleTimeout?t.visibleTimeout:this.visibleTimeout,r.scrollSensitivity=t&&t.scrollSensitivity?t.scrollSensitivity:this.scrollSensitivity,r},e}(),a=function(){return function(e){this.scrollPosition=e&&e.scrollPosition?e.scrollPosition:0,this.isScrollAtStart=!e||"undefined"==typeof e.isScrollAtStart||e.isScrollAtStart,this.isScrollAtEnd=!(!e||"undefined"==typeof e.isScrollAtEnd)&&e.isScrollAtEnd}}(),d={linear:function(e){return e},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}},h=function(){function e(e,r,s,o){var l=this;this.viewContainer=e,this.renderer=r,this.document=s,this.optionsDefaults=o,this.scrollChanged=new t.EventEmitter,this.interactionSubscriptions=new n.Subscription,this.initWheel=function(){var e=i.Observable.fromEvent(l.el,"DOMMouseScroll"),t=i.Observable.fromEvent(l.el,"mousewheel"),r=i.Observable.merge.apply(i.Observable,[e,t]).subscribe(function(e){var t=l.options.scrollSensitivity/100,r=e.wheelDeltaY,i=Math.max(1,r*t),n=Math.min(-1,r*t);r=1===Math.sign(r)?i:n,l.scrollContent(-r,!0,!1),e.preventDefault&&e.preventDefault()});l.interactionSubscriptions.add(r)},this.initDrag=function(){var e=l.bar,t=i.Observable.fromEvent(l.document.documentElement,"mousemove"),r=i.Observable.fromEvent(l.document.documentElement,"touchmove"),n=i.Observable.fromEvent(e,"mousedown"),s=i.Observable.fromEvent(l.el,"touchstart"),o=i.Observable.fromEvent(l.document.documentElement,"mouseup"),a=i.Observable.fromEvent(l.document.documentElement,"touchend"),d=n.mergeMap(function(r){return l.pageY=r.pageY,l.top=parseFloat(getComputedStyle(e).top),t.map(function(e){return e.preventDefault(),l.top+e.pageY-l.pageY}).takeUntil(o)}),h=s.mergeMap(function(t){return l.pageY=t.targetTouches[0].pageY,l.top=-parseFloat(getComputedStyle(e).top),r.map(function(e){return-(l.top+e.targetTouches[0].pageY-l.pageY)}).takeUntil(a)}),u=i.Observable.merge.apply(i.Observable,[d,h]).subscribe(function(e){l.body.addEventListener("selectstart",l.preventDefaultEvent,!1),l.renderer.setElementStyle(l.body,"touch-action","pan-y"),l.renderer.setElementStyle(l.body,"user-select","none"),l.renderer.setElementStyle(l.bar,"top",e+"px");var t=l.scrollContent(0,!0,!1),r=l.el.offsetHeight-l.bar.offsetHeight;t&&t<0&&-t<=r?l.renderer.setElementStyle(l.el,"paddingTop",-t+"px"):t&&t>0&&t<=r&&l.renderer.setElementStyle(l.el,"paddingBottom",t+"px")}),p=i.Observable.merge.apply(i.Observable,[o,a]).subscribe(function(){l.body.removeEventListener("selectstart",l.preventDefaultEvent,!1);var e=parseInt(l.el.style.paddingTop,10),t=parseInt(l.el.style.paddingBottom,10);l.renderer.setElementStyle(l.body,"touch-action","unset"),l.renderer.setElementStyle(l.body,"user-select","default"),e>0?l.scrollTo(0,300,"linear"):t>0&&l.scrollTo(0,300,"linear")});l.interactionSubscriptions.add(u),l.interactionSubscriptions.add(p)},this.preventDefaultEvent=function(e){e.preventDefault(),e.stopPropagation()},this.viewContainer=e,this.el=e.element.nativeElement,this.body=this.document.querySelector("body"),this.mutationThrottleTimeout=50}return e.prototype.ngOnInit=function(){var e=this;if(this.optionsDefaults?this.options=new l(this.optionsDefaults).merge(this.options):this.options=new l(this.options),this.setElementStyle(),this.wrapContainer(),this.initGrid(),this.initBar(),this.getBarHeight(),this.initWheel(),this.initDrag(),this.options.alwaysVisible||this.hideBarAndGrid(),MutationObserver&&(this.mutationObserver=new MutationObserver(function(){e.mutationThrottleTimeout&&(clearTimeout(e.mutationThrottleTimeout),e.mutationThrottleTimeout=setTimeout(e.onMutation.bind(e),50))}),this.mutationObserver.observe(this.el,{subtree:!0,childList:!0})),this.scrollEvents&&this.scrollEvents instanceof t.EventEmitter){var r=this.scrollEvents.subscribe(function(t){return e.handleEvent(t)});this.interactionSubscriptions.add(r)}},e.prototype.ngOnDestroy=function(){this.interactionSubscriptions.unsubscribe()},e.prototype.handleEvent=function(e){if("scrollToBottom"===e.type){var t=this.el.scrollHeight-this.el.clientHeight;this.scrollTo(t,e.duration,e.easing)}else if("scrollToTop"===e.type){t=0;this.scrollTo(t,e.duration,e.easing)}else if("scrollToPercent"===e.type&&e.percent>=0&&e.percent<=100){t=Math.round((this.el.scrollHeight-this.el.clientHeight)/100*e.percent);this.scrollTo(t,e.duration,e.easing)}else if("scrollTo"===e.type){(t=e.y)<=this.el.scrollHeight-this.el.clientHeight&&t>=0&&this.scrollTo(t,e.duration,e.easing)}else"recalculate"===e.type&&this.getBarHeight()},e.prototype.setElementStyle=function(){var e=this.el;this.renderer.setElementStyle(e,"overflow","hidden"),this.renderer.setElementStyle(e,"position","relative"),this.renderer.setElementStyle(e,"display","block")},e.prototype.onMutation=function(){this.getBarHeight()},e.prototype.wrapContainer=function(){this.wrapper=this.renderer.createElement(this.el,"div");var e=this.wrapper,t=this.el;this.renderer.setElementClass(e,"slimscroll-wrapper",!0),this.renderer.setElementStyle(e,"position","relative"),this.renderer.setElementStyle(e,"overflow","hidden"),this.renderer.setElementStyle(e,"display","inline-block"),this.renderer.setElementStyle(e,"margin",getComputedStyle(t).margin),this.renderer.setElementStyle(e,"width","inherit"),this.renderer.setElementStyle(e,"height","100%"),t.parentNode.insertBefore(e,t),e.appendChild(t)},e.prototype.initGrid=function(){this.grid=this.renderer.createElement(this.el,"div");var e=this.grid;this.renderer.setElementClass(e,"slimscroll-grid",!0),this.renderer.setElementStyle(e,"position","absolute"),this.renderer.setElementStyle(e,"top","0"),this.renderer.setElementStyle(e,"bottom","0"),this.renderer.setElementStyle(e,this.options.position,"0"),this.renderer.setElementStyle(e,"width",this.options.gridWidth+"px"),this.renderer.setElementStyle(e,"background",this.options.gridBackground),this.renderer.setElementStyle(e,"opacity",this.options.gridOpacity),this.renderer.setElementStyle(e,"display","block"),this.renderer.setElementStyle(e,"cursor","pointer"),this.renderer.setElementStyle(e,"z-index","99"),this.renderer.setElementStyle(e,"border-radius",this.options.gridBorderRadius+"px"),this.renderer.setElementStyle(e,"margin",this.options.gridMargin),this.wrapper.appendChild(e)},e.prototype.initBar=function(){this.bar=this.renderer.createElement(this.el,"div");var e=this.bar;this.renderer.setElementClass(e,"slimscroll-bar",!0),this.renderer.setElementStyle(e,"position","absolute"),this.renderer.setElementStyle(e,"top","0"),this.renderer.setElementStyle(e,this.options.position,"0"),this.renderer.setElementStyle(e,"width",this.options.barWidth+"px"),this.renderer.setElementStyle(e,"background",this.options.barBackground),this.renderer.setElementStyle(e,"opacity",this.options.barOpacity),this.renderer.setElementStyle(e,"display","block"),this.renderer.setElementStyle(e,"cursor","pointer"),this.renderer.setElementStyle(e,"z-index","100"),this.renderer.setElementStyle(e,"border-radius",this.options.barBorderRadius+"px"),this.renderer.setElementStyle(e,"margin",this.options.barMargin),this.wrapper.appendChild(e)},e.prototype.getBarHeight=function(){var e=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30)+"px",t=parseInt(e,10)===this.el.offsetHeight?"none":"block";this.renderer.setElementStyle(this.bar,"height",e),this.renderer.setElementStyle(this.bar,"display",t),this.renderer.setElementStyle(this.grid,"display",t)},e.prototype.scrollTo=function(e,t,r){var i=this,n=Date.now(),s=this.el.scrollTop,o=(this.el.offsetHeight,this.bar.offsetHeight,this.el.scrollHeight-this.el.clientHeight),l=Math.max(this.el.offsetHeight/this.el.scrollHeight*this.el.offsetHeight,30),a=parseInt(this.el.style.paddingTop,10)||0,h=parseInt(this.el.style.paddingBottom,10)||0,u=function(p){var c=Date.now(),g=Math.min(1,(c-n)/t),m=d[r](g);if(a>0||h>0){var b=null;a>0&&(b=-(m*(e-(b=-a))+b),i.renderer.setElementStyle(i.el,"paddingTop",b+"px")),h>0&&(b=m*(e-(b=h))+b,i.renderer.setElementStyle(i.el,"paddingBottom",b+"px"))}else i.el.scrollTop=m*(e-s)+s;var y=i.el.scrollTop/o;if(0===h){var f=Math.round(Math.round(i.el.clientHeight*y)-l);f>0&&i.renderer.setElementStyle(i.bar,"top",f+"px")}g<1&&requestAnimationFrame(u)};requestAnimationFrame(u)},e.prototype.scrollContent=function(e,t,r){var i=this,n=e,s=this.el.offsetHeight-this.bar.offsetHeight,o=this.el.scrollHeight-this.el.offsetHeight,l=null;t&&(((n=parseInt(getComputedStyle(this.bar).top,10)+20*e/100*this.bar.offsetHeight)<0||n>s)&&(l=n>s?n-s:n),n=Math.min(Math.max(n,0),s),n=e>0?Math.ceil(n):Math.floor(n),this.renderer.setElementStyle(this.bar,"top",n+"px")),n=parseInt(getComputedStyle(this.bar).top,10)/(this.el.offsetHeight-this.bar.offsetHeight)*o,this.el.scrollTop=n,this.showBarAndGrid(),this.options.alwaysVisible||(this.visibleTimeout&&clearTimeout(this.visibleTimeout),this.visibleTimeout=setTimeout(function(){i.hideBarAndGrid()},this.options.visibleTimeout));var d=0===n,h=n===o,u=Math.ceil(n),p=new a({scrollPosition:u,isScrollAtStart:d,isScrollAtEnd:h});return this.scrollChanged.emit(p),l},e.prototype.showBarAndGrid=function(){this.renderer.setElementStyle(this.grid,"background",this.options.gridBackground),this.renderer.setElementStyle(this.bar,"background",this.options.barBackground)},e.prototype.hideBarAndGrid=function(){this.renderer.setElementStyle(this.grid,"background","transparent"),this.renderer.setElementStyle(this.bar,"background","transparent")},e.prototype.destroy=function(){if(this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null),this.el.parentElement.classList.contains("slimscroll-wrapper")){var e=this.el.parentElement,t=this.el.querySelector(".slimscroll-bar");this.el.removeChild(t),this.unwrap(e)}},e.prototype.unwrap=function(e){for(var t=document.createDocumentFragment();e.firstChild;){var r=e.removeChild(e.firstChild);t.appendChild(r)}e.parentNode.replaceChild(t,e)},e.prototype.onResize=function(e){this.getBarHeight()},e}();h.decorators=[{type:t.Directive,args:[{selector:"[slimScroll]",exportAs:"slimScroll"}]}],h.ctorParameters=function(){return[{type:t.ViewContainerRef,decorators:[{type:t.Inject,args:[t.ViewContainerRef]}]},{type:t.Renderer,decorators:[{type:t.Inject,args:[t.Renderer]}]},{type:undefined,decorators:[{type:t.Inject,args:[r.DOCUMENT]}]},{type:undefined,decorators:[{type:t.Inject,args:[o]},{type:t.Optional}]}]},h.propDecorators={options:[{type:t.Input}],scrollEvents:[{type:t.Input}],scrollChanged:[{type:t.Output,args:["scrollChanged"]}],onResize:[{type:t.HostListener,args:["window:resize",["$event"]]}]};var u=function(){return function(){}}();u.decorators=[{type:t.NgModule,args:[{declarations:[h],exports:[h]}]}],u.ctorParameters=function(){return[]},e.SlimScrollEvent=s,e.SLIMSCROLL_DEFAULTS=o,e.SlimScrollOptions=l,e.NgSlimScrollModule=u,e.ɵa=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-slimscroll.umd.min.js.map
